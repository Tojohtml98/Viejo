<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Balística - GitHub Pages</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Calculadora Balística</h1>
            <p>Calcula la trayectoria de tu proyectil con precisión</p>
        </header>

        <div class="calculator">
            <!-- Sección de entrada -->
            <div class="input-section">
                <h2>Datos de Entrada</h2>
                <div class="form-group">
                    <label for="velocity">Velocidad Inicial (m/s):</label>
                    <input type="number" id="velocity" placeholder="Ej: 800" step="0.1" min="0">
                </div>
                
                <div class="form-group">
                    <label for="weight">Peso del Proyectil (gramos):</label>
                    <input type="number" id="weight" placeholder="Ej: 9.5" step="0.1" min="0">
                </div>
                
                <div class="form-group">
                    <label for="bc">Coeficiente Balístico (BC):</label>
                    <input type="number" id="bc" placeholder="Ej: 0.4" step="0.01" min="0">
                </div>
                
                <div class="form-group">
                    <label for="distance">Distancia al Objetivo (metros):</label>
                    <input type="number" id="distance" placeholder="Ej: 100" step="1" min="0">
                </div>
                
                <div class="form-group">
                    <label for="windSpeed">Velocidad del Viento (km/h):</label>
                    <input type="number" id="windSpeed" placeholder="Ej: 10" step="0.1" min="0">
                </div>
                
                <div class="form-group">
                    <label for="windAngle">Ángulo del Viento (grados):</label>
                    <input type="number" id="windAngle" placeholder="0-360" min="0" max="360" value="90">
                    <div class="wind-direction">
                        <span>90° = Viento de costado</span>
                        <span>0° = Viento de frente</span>
                        <span>180° = Viento de cola</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="zeroDistance">Distancia de Ajuste de Cero (metros):</label>
                    <input type="number" id="zeroDistance" placeholder="Ej: 100" step="1" min="0" value="100" onchange="onZeroDistanceChange()">
                    <div class="zero-buttons">
                        <button type="button" class="zero-btn" onclick="setZeroDistance(50)">50m</button>
                        <button type="button" class="zero-btn" onclick="setZeroDistance(100)">100m</button>
                        <button type="button" class="zero-btn" onclick="setZeroDistance(200)">200m</button>
                        <button type="button" class="zero-btn" onclick="setZeroDistance(300)">300m</button>
                    </div>
                    <div class="zero-explanation">
                        <small>La mira se ajustará para que el proyectil impacte en el centro a esta distancia</small>
                    </div>
                </div>
                
                <button onclick="calculateTrajectory()">Calcular Trayectoria</button>
            </div>

            <!-- Sección de resultados -->
            <div class="results-section">
                <h2>Resultados</h2>
                <div class="results-grid">
                    <div class="result-item">
                        <span class="result-label">Caída (cm):</span>
                        <span id="drop" class="result-value">0.0</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Deriva por Viento (cm):</span>
                        <span id="windDrift" class="result-value">0.0</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Velocidad al Impacto (m/s):</span>
                        <span id="impactVelocity" class="result-value">0.0</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Energía al Impacto (J):</span>
                        <span id="impactEnergy" class="result-value">0</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Tiempo de Vuelo (s):</span>
                        <span id="timeOfFlight" class="result-value">0.0</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Ajuste de Cero:</span>
                        <span id="zeroInfo" class="result-value">Centro a 100m</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Corrección Vertical:</span>
                        <span id="verticalCorrection" class="result-value">0.0 cm</span>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="trajectoryChart"></canvas>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Calculadora Balística &copy; 2024 | Para fines educativos</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
    <script>
        // Inicializar el gráfico
        const ctx = document.getElementById('trajectoryChart').getContext('2d');
        const trajectoryChart = new Chart(ctx, {
            type: 'line',
            data: {
                datasets: [
                    {
                        label: 'Trayectoria del Proyectil',
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        borderWidth: 2,
                        pointRadius: 3,
                        fill: true,
                        data: []
                    },
                    {
                        label: 'Línea de Mira',
                        borderColor: '#e74c3c',
                        borderWidth: 1,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        fill: false,
                        data: []
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom',
                        title: {
                            display: true,
                            text: 'Distancia (m)'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Altura (cm)'
                        },
                        beginAtZero: true
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return `${context.dataset.label}: ${context.parsed.y.toFixed(1)} cm a ${context.parsed.x} m`;
                            }
                        }
                    }
                }
            }
        });
    </script>
